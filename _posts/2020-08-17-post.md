---
title: "[Diary] Cool night"
date: 2020-08-17 01:48:22 -0400
categories: diary
---

낮엔 엄청 더웠는데,  밤바람은 다소 시원하다.

async 구현도 꽤 진행됐다. 현재 알고리즘 플로우는,

1. DB에서 현재 등록되어있는 gameId list를 받아온다.

2. 대전기록을 통해 한 아이디의 이번 시즌 gameId를 전부 가져온다.

3. 게임 요약과 타임라인 데이터를 받아온다. 이 때 여러 아이디를 사용하기 때문에, 
아이디의 수만큼 async로 동시에 받아온다.

4. 받아온 데이터를 통해 게임요약, 개인요약, 팀요약, 이벤트를 dataframe 형태로 만든다.

5. DB에 없는 데이터만 추가한다.


이 정도인데, 코드는 돌아가는데 CPU를 많이 잡아먹는 순간이 있는지 종종 느리게 돌아간다.
0.x초 단위로 하나씩 추가돼야하는데, 2초가 넘게 걸리는 순간이 꽤 있다.
일단 재부팅시켜보고, 그래도 안 되면 내일 코드 분석해야겠다.

keywords : riot-api, sql, pandas
